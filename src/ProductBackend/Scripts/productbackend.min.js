(function () {
    $(function () {
        /*  jQuery寫法測試練習
        $(function () {
            $("#dialog-modal").dialog({
                height: 140,
                modal: true
            });
        });

        $(document).ready(function () {
            $("#btnDelete").click(function () {
                console.log("TTT");
            });
        });
        */

        $("#btnLogin").click(function () {
            if ($("#id").val() == "") {
                alert("你尚未填寫 帳號");
                eval("document.form1['id'].focus()");
            } else if ($("#ps").val() == "") {
                alert("你尚未填寫 密碼");
                $("#ps").focus();
            } else {
                document.form1.submit();
            }
        })

        $("#imgInp").change(function () {
            readURL(this);
        });


        //========== ADD ============

        $("#addDataForm").submit(function (event) {
            /* event.preventDefault();*/
            var item = {};
            item['ProdName'] = $('#product-name').val();
            item['Price'] = $('#price-name').val();
            item['Count'] = $('#count-name').val();

            console.log(item);
            $.ajax({
                type: 'post',
                url: '/Product/Create',
                data: JSON.stringify(item),
                contentType: "application/json; charset=utf-8",
                beforeSend: function (xhr, opts) {
                    //show loading gif
                    $("#LoadingImage").show();
                },
                success: function (response) {
                    
                    console.log('Close');
                },
                error: function () {

                },
                complete: function () {
                    //remove loading gif
                    $('#myModal').modal('in');                 
                }
            });
        });

    })

    function readURL(input) {
        if (input.files && input.files[0]) {
            /*藉由 FileReader 物件，Web 應用程式能以非同步（asynchronously）方式讀取儲存在用戶端的檔案（或原始資料暫存）內容，可以使用 File 或 Blob 物件指定要讀取的資料。*/
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
})();

function productBtnDeleteEvent(value) {
    $.ajax({
        type: 'post',
        url: "/Product/Delete",
        dataType: 'json',
        data: {
            'value': value
        },
        success: function (response) {
            console.log('002');
            if (response.success) {
                window.location.replace("/Product/Details");
            } else {
                alert(response.responseText);
            }
        },
        error: function () {

        },

    });
}

